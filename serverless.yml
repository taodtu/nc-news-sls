service: nc-news-sls

plugins:
  - serverless-offline

provider:
  name: aws
  runtime: nodejs10.x
  stage: dev
  region: eu-west-2
  memorySize: 128
  apiKeys:
    - apikey

functions:
  seed:
    handler: handlerTable.seed

  dropTable:
    handler: handlerTable.dropTable

  createTable:
    handler: handlerTable.createTable

  getTopics:
    handler: handler.getTopics
    events:
      - http:
          path: /topics
          method: get
          cors: true

  getUser:
    handler: handler.getUser
    events:
      - http:
          path: /users/{username}
          method: get
          cors: true

  getArticles:
    handler: handlerArticle.getArticles
    events:
      - http:
          path: /articles
          method: get
          cors: true

  sendArticleByID:
    handler: handlerArticle.getArticleByID
    events:
      - http:
          path: /articles/{article_id}
          method: get
          cors: true

  patchArticle:
    handler: handlerArticle.patchArticle
    events:
      - http:
          path: /articles/{article_id}
          method: patch
          cors: true

  sendComments:
    handler: handlerComment.sendComments
    events:
      - http:
          path: /users/{username}/comments
          method: get
          cors: true
      - http:
          path: /articles/{article_id}/comments
          method: get
          cors: true

  patchComment:
    handler: handlerComment.patchComment
    events:
      - http:
          path: /comments/{comment_id}
          method: patch
          cors: true

  postComment:
    handler: handlerComment.postComment
    events:
      - http:
          path: /articles/{article_id}/comments
          method: post
          cors: true

  deleteComment:
    handler: handlerComment.deleteComment
    events:
      - http:
          path: /comments/{comment_id}
          method: delete
          cors: true
